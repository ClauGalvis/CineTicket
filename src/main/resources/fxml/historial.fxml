<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.cineticket.controlador.HistorialController"
            stylesheets="@../css/styles.css">

    <!-- ========== SIDEBAR IZQUIERDO ========== -->
    <left>
        <VBox spacing="20" styleClass="sidebar">
            <padding>
                <Insets top="24" right="12" bottom="12" left="12"/>
            </padding>

            <!-- Logo -->
            <ImageView fitHeight="28" preserveRatio="true">
                <image>
                    <Image url="@../img/logo_cinetick.png"/>
                </image>
            </ImageView>

            <!-- Navegación -->
            <VBox spacing="8">
                <Button text="Películas"
                        onAction="#irACartelera"
                        styleClass="sidebar-button"/>

                <Button text="Mis compras"
                        disable="true"
                        styleClass="sidebar-button-selected"/>
            </VBox>
        </VBox>
    </left>

    <!-- ========== TOPBAR (LOGOUT) ========== -->
    <top>
        <HBox alignment="CENTER_RIGHT" styleClass="topbar">
            <padding>
                <Insets top="12" right="18" bottom="12" left="12"/>
            </padding>

            <Button text="Cerrar sesión"
                    styleClass="logout-button"
                    onAction="#cerrarSesion"/>
        </HBox>
    </top>

    <!-- ========== CONTENIDO PRINCIPAL ========== -->
    <center>
        <VBox spacing="18">
            <padding>
                <Insets top="24" right="24" bottom="24" left="24"/>
            </padding>

            <!-- Título principal -->
            <Label text="Historial de compras"
                   styleClass="page-title"/>

            <!-- Tarjeta con la tabla -->
            <VBox spacing="10" styleClass="card">
                <padding>
                    <Insets top="18" right="18" bottom="18" left="18"/>
                </padding>

                <Label text="Detalle de transacciones"
                       styleClass="card-title"/>

                <TableView fx:id="tablaCompras" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colPelicula"
                                     text="Película"
                                     prefWidth="220"/>
                        <TableColumn fx:id="colFecha"
                                     text="Fecha"
                                     prefWidth="110"/>
                        <TableColumn fx:id="colHora"
                                     text="Hora"
                                     prefWidth="80"/>
                        <TableColumn fx:id="colAsientos"
                                     text="Asientos"
                                     prefWidth="150"/>
                        <TableColumn fx:id="colConfiteria"
                                     text="Confitería"
                                     prefWidth="250"/>
                        <TableColumn fx:id="colCancelar"
                                     text=" "
                                     prefWidth="110"
                                     sortable="false"/>
                        <TableColumn fx:id="colDescargar"
                                     text="Comprobante"
                                     prefWidth="130"
                                     sortable="false"/>
                    </columns>
                </TableView>

                <Label fx:id="lblVacio"
                       text="Todavía no tienes compras registradas."
                       visible="false"
                       styleClass="empty-text"/>
            </VBox>
        </VBox>
    </center>

</BorderPane>
